(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),s=a.n(c),l=(a(89),a(83)),i=a(17),o=a(18),m=a(20),u=a(19),p=a(21),d=a(189),h=a(190),v=a(191),g=a(16),E=a.n(g),f=a(26),b=a(179),w=a(75),N=a(180),y=a(181),j=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.page,t=this.props.totalPages,a={},n={};return 1===e&&(a.hidden="hidden"),e===t&&(n.hidden="hidden"),r.a.createElement("div",{className:"pagination"},r.a.createElement(b.a,{to:{pathname:"/page/".concat(e-1)}},r.a.createElement("button",Object.assign({onClick:this.props.onPrev},a),"Prev")),r.a.createElement(b.a,{to:{pathname:"/page/".concat(e+1)}},r.a.createElement("button",Object.assign({onClick:this.props.onNext},n),"Next")))}}]),t}(n.Component),k=(a(95),"3210a5ea0268de0ce8488efd017058c1"),x=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={movLists:[],prices:[],page:1,totalPages:null},a.fetchNowPlaying=Object(f.a)(E.a.mark(function e(){var t,n,r;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.themoviedb.org/3/movie/now_playing?api_key=".concat(k,"&page=").concat(a.state.page),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,a.setState({movLists:r.results,totalPages:r.total_pages});case 8:case"end":return e.stop()}},e,this)})),a.calcPrice=function(e){var t=null;return e>1&&e<=3?t=3500:e>3&&e<=6?t=8250:e>6&&e<=8?t=16350:e>8&&e<=10&&(t=21250),t},a.goNext=function(){a.setState(function(e){return{page:e.page+1}},a.fetchNowPlaying)},a.goPrev=function(e){a.setState(function(e){return{page:e.page-1}},a.fetchNowPlaying)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(w.a,null,r.a.createElement("h2",{className:"sub-header"},"Film yang sedang tayang"),r.a.createElement(N.a,{className:"row-eq-height"},this.state.movLists.map(function(t){var a=t.id,n=t.title;n=(n=n.toLowerCase()).replace(/\s/g,"-");var c="".concat(a,"-",n),s=e.props.state.purchased.filter(function(e){return e.id===a});return r.a.createElement(y.a,{sm:2,md:3,key:t.id},r.a.createElement(b.a,{to:{pathname:"/movie/".concat(c),state:{id:a}},className:"link-movie"},r.a.createElement("div",{className:"list-box"},r.a.createElement("div",{className:"rating"},t.vote_average),r.a.createElement("div",{className:"img-box"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/"+t.poster_path,alt:"Poster"+n})),r.a.createElement("div",{className:"detail"},r.a.createElement("p",{className:"title"},t.title.length<20?"".concat(t.title):"".concat(t.title.substring(0,25)+"...")),r.a.createElement("p",null,t.overview.length<50?"".concat(t.overview):"".concat(t.overview.substring(0,70)+"...")),r.a.createElement("div",{className:"purchase"},r.a.createElement("p",{className:"price"},"Harga = ",e.calcPrice(t.vote_average))),r.a.createElement("p",{style:{color:"#e74c3c"}},r.a.createElement("b",{hidden:!s.length},"Anda telah membeli film ini"))))))}))),r.a.createElement(j,{page:this.state.page,totalPages:this.state.totalPages,onNext:this.goNext,onPrev:this.goPrev}))}},{key:"componentDidMount",value:function(){this.fetchNowPlaying()}},{key:"componentDidUpdate",value:function(){window.scrollTo(0,0)}}]),t}(n.Component),O=a(182),P=a(187),_=a(183),S=a(184),M=a(79),C=a.n(M),B=function(e){return r.a.createElement(C.a,Object.assign({},{speed:500,autoplay:!0,slidesToShow:4,arrows:!1,slidesToScroll:1,infinite:!0,adaptiveHeight:!0},{className:"cast-slider"}),e.casts.map(function(e){return r.a.createElement("div",{className:"cast-box",key:e.cast_id},r.a.createElement("div",{className:"img-box"},r.a.createElement("img",{src:"http://image.tmdb.org/t/p/w500/"+e.profile_path,alt:"Poster"+e.name})),r.a.createElement("p",{className:"name"},e.name),r.a.createElement("p",{className:"char"},e.character))}))},A=function(e){return r.a.createElement(w.a,{className:"related",fluid:!0},r.a.createElement(N.a,null,r.a.createElement(y.a,{md:6},r.a.createElement("div",{className:"related-box"},r.a.createElement("p",{className:"header"},"Film Serupa"),r.a.createElement(N.a,null,e.similar.map(function(e){var t=e.id,a=e.title;a=(a=a.toLowerCase()).replace(/\s/g,"-");var n="".concat(e.id,"-",a);return r.a.createElement(y.a,{md:3,key:t},r.a.createElement(b.a,{to:{pathname:"/movie/".concat(n),state:{id:t}}},r.a.createElement("div",{className:"related-item"},r.a.createElement("div",{className:"img-box"},r.a.createElement("img",{src:"http://image.tmdb.org/t/p/w500/"+e.poster_path,alt:e.title})),r.a.createElement("div",{className:"detail"},r.a.createElement("p",{className:"title"},e.title.length<15?"".concat(e.title):"".concat(e.title.substring(0,20)+"..."))))))})))),r.a.createElement(y.a,{md:6},r.a.createElement("div",{className:"related-box"},r.a.createElement("p",{className:"header"},"Film Rekomendasi"),r.a.createElement(N.a,null,e.recommend.map(function(e){var t=e.id,a=e.title;a=(a=a.toLowerCase()).replace(/\s/g,"-");var n="".concat(e.id,"-",a);return r.a.createElement(y.a,{md:3,key:t},r.a.createElement(b.a,{to:{pathname:"/movie/".concat(n),state:{id:t}}},r.a.createElement("div",{className:"related-item"},r.a.createElement("div",{className:"img-box"},r.a.createElement("img",{src:"http://image.tmdb.org/t/p/w500/"+e.poster_path,alt:e.title})),r.a.createElement("div",{className:"detail"},r.a.createElement("p",{className:"title"},e.title.length<15?"".concat(e.title):"".concat(e.title.substring(0,20)+"..."))))))}))))))},L="3210a5ea0268de0ce8488efd017058c1",F=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",title:"",tagline:"",year:"",overview:"",runtime:null,genres:[],poster:"",backdrop:"",casts:[],rating:null,voters:null,price:"",purchaseModal:!1,similar:[],recommend:[]},a.fetchMovie=Object(f.a)(E.a.mark(function e(){var t,n,r,c;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.location.state.id,n="https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat(L),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,a.setState({id:c.id,title:c.title,tagline:c.tagline,year:c.release_date,overview:c.overview,runtime:c.runtime,genres:c.genres,poster:c.poster_path,backdrop:c.backdrop_path,rating:c.vote_average,voters:c.vote_count}),a.calcPrice(),a.fetchCasts(),a.fetchSimilar(),a.fetchRecommend();case 13:case"end":return e.stop()}},e,this)})),a.fetchCasts=Object(f.a)(E.a.mark(function e(){var t,n,r,c,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.id,n="https://api.themoviedb.org/3/movie/".concat(t,"/credits?api_key=").concat(L),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,s=c.cast.slice(0,10),a.setState({casts:s});case 10:case"end":return e.stop()}},e,this)})),a.fetchSimilar=Object(f.a)(E.a.mark(function e(){var t,n,r,c,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.id,n="https://api.themoviedb.org/3/movie/".concat(t,"/similar?api_key=").concat(L),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,s=c.results.slice(0,4),a.setState({similar:s});case 10:case"end":return e.stop()}},e,this)})),a.fetchRecommend=Object(f.a)(E.a.mark(function e(){var t,n,r,c,s;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.id,n="https://api.themoviedb.org/3/movie/".concat(t,"/recommendations?api_key=").concat(L),e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,s=c.results.slice(0,4),a.setState({recommend:s});case 10:case"end":return e.stop()}},e,this)})),a.calcPrice=function(){var e=a.state.rating,t=null;e>1&&e<=3?t=3500:e>3&&e<=6?t=8250:e>6&&e<=8?t=16350:e>8&&e<=10&&(t=21250),a.setState({price:t})},a.showPurchaseModal=function(){a.setState({purchaseModal:!0})},a.hidePurchaseModal=function(){a.setState({purchaseModal:!1})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.id,n=t.title,c=t.tagline,s=t.year,l=t.overview,i=t.runtime,o=t.genres,m=t.rating,u=t.voters,p=t.price,d=t.poster,h=this.props.purchased.filter(function(e){return e.id===a}),v=this.props.balance-this.state.price<0;return r.a.createElement("div",null,r.a.createElement(w.a,{className:"movie-box"},r.a.createElement(N.a,{className:"show-grid"},r.a.createElement(y.a,{xs:12,md:4},r.a.createElement("div",{className:"poster"},r.a.createElement("div",{className:"img-box"},r.a.createElement("img",{src:"http://image.tmdb.org/t/p/w500/"+d,alt:"Poster"+n}),r.a.createElement("div",{className:"purchase"},r.a.createElement("div",{className:"genres"},o.map(function(e){return r.a.createElement(O.a,{key:e.id},e.name)})),r.a.createElement("p",{className:"runtime"},"Durasi"," ",r.a.createElement("span",null,Math.trunc(i/60)," jam ",i%60," menit")),r.a.createElement("p",{className:"price"},"Harga = ",p),r.a.createElement("button",{className:"btn btn-primer btn-purchase",disabled:h.length||v,onClick:this.showPurchaseModal},"BELI FILM"),r.a.createElement("p",{style:{color:"#e74c3c"}},r.a.createElement("b",{hidden:!h.length},"Anda telah membeli film ini")),r.a.createElement(P.a,{className:"purchase-modal",show:this.state.purchaseModal,onHide:this.hidePurchaseModal},r.a.createElement(P.a.Header,null,r.a.createElement(P.a.Title,null,"Konfirmasi Pembelian")),r.a.createElement(P.a.Body,null,"Saat ini Anda memiliki saldo sebesar"," ",r.a.createElement("b",null,this.props.balance),r.a.createElement("br",null),"Apakah Anda yakin ingin membeli film ",r.a.createElement("b",null,n)," ","seharga ",r.a.createElement("b",null,p),"?"),r.a.createElement(P.a.Footer,null,r.a.createElement(_.a,{onClick:this.hidePurchaseModal},"Batal"),r.a.createElement(_.a,{className:"btn btn-primer",onClick:function(){e.props.onBuying(a,p),e.hidePurchaseModal()}},"Beli"))))))),r.a.createElement(y.a,{xs:12,md:8},r.a.createElement("div",{className:"detail"},r.a.createElement("div",{className:"rating"},r.a.createElement(S.a,{now:10*m}),r.a.createElement("span",null,m)," dari ",u," orang"),r.a.createElement("p",{className:"title"},n,r.a.createElement("span",null,"(",s.slice(0,4),")")),c?r.a.createElement("p",{className:"tagline"},'"',c,'"'):null,r.a.createElement("p",{className:"overview"},l),r.a.createElement(B,{casts:this.state.casts}))))),r.a.createElement(A,{similar:this.state.similar,recommend:this.state.recommend}))}},{key:"componentDidMount",value:function(){this.fetchMovie()}}]),t}(n.Component),H=a(188),T=a(185),D=a(186),I=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(H.a,{fixedTop:!0},r.a.createElement(H.a.Header,null,r.a.createElement(H.a.Brand,null,r.a.createElement(b.a,{to:{pathname:"/"}},"tokoFLIX"))),r.a.createElement(T.a,{pullRight:!0},r.a.createElement(D.a,{eventKey:1,href:"#"},"Saldo : ",r.a.createElement("span",null,this.props.balance))))}}]),t}(n.Component),R=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,r.a.createElement("a",{href:"https://https://github.com/pandurijal"},"Tokoflix \xa9 2019")))},J=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={balance:1e5,purchased:[]},a.handleBuying=function(e,t){var n=a.state.balance,r=[];r.id=e;var c=[].concat(Object(l.a)(a.state.purchased),[r]);if(n-t<0)return null;n-=t,a.setState({balance:n,purchased:c})},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{balance:this.state.balance}),r.a.createElement(h.a,null,r.a.createElement(v.a,{path:"/",render:function(t){return r.a.createElement(x,Object.assign({},t,{state:e.state,onBuying:e.handleBuying}))},exact:!0}),r.a.createElement(v.a,{path:"/page/:pg",component:x}),r.a.createElement(v.a,{path:"/movie/:id",render:function(t){return r.a.createElement(F,Object.assign({},t,{balance:e.state.balance,purchased:e.state.purchased,onBuying:e.handleBuying}))}})),r.a.createElement(R,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},84:function(e,t,a){e.exports=a(178)},89:function(e,t,a){},95:function(e,t,a){}},[[84,2,1]]]);
//# sourceMappingURL=main.d6873a8d.chunk.js.map